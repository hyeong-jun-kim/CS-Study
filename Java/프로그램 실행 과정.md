# 전체 순서

1. **소스 파일 작성**
    
    자바 소스 파일을 작성하고, 일반적으로 확장자로 **`.java`**를 사용한다.
    
2. **컴파일**
    
    자바 컴파일러를 사용하여 소스 파일을 컴파일하여 바이트 코드 파일(**`.class`**)을 생성한다.
    
3. **실행 엔진**
    
    JVM(Java 가상 머신)은 실행 엔진을 통해 바이트 코드를 해석하고 실행한다.
    
4. **클래스 로딩**
    
    JVM은 필요한 클래스 파일을 동적으로 로드한다. 이때 ClassLoader를 사용하여 클래스 파일을 메모리에 로드한다.
    
5. **인터프리터와 JIT 컴파일러**
    
    JVM은 내부에 있는 인터프리터를 사용하여 바이트 코드를 한 줄씩 해석하고 실행한다. JIT 컴파일러는 인터프리터로 실행되는 코드를 분석하여 기계어로 컴파일하고 최적화하여 실행 속도를 향상시킨다.
    
6. **Runtime Data Areas**
    
    해석된 바이트 코드는 JVM의 Runtime Data Areas에 배치되어 실행된다. 이는 메모리 관리, 스레드 관리, 예외 처리 등 다양한 기능을 제공한다.
    
7. **main 메서드 호출**
    
    프로그램에서 지정된 클래스에서 main 메서드를 호출하여 프로그램의 시작점으로 설정한다.
    
8. **순차적 실행**
    
    main 메서드의 첫 줄부터 코드가 순차적으로 실행된다. 코드 실행이 마지막에 도달하면 프로그램이 종료됩니다. 이 과정에서 사용된 자원들은 반환된다.
    

**🔍 추가 내용**

- JVM은 메모리 관리, 스레드 관리, 예외 처리 등 다양한 기능을 제공한다.
- JIT 컴파일러는 반복적으로 실행되는 코드를 실시간으로 기계어로 컴파일하여 성능을 향상시킨다.
- JVM은 플랫폼 독립성을 제공하며, 자바 프로그램은 어떤 운영체제에서도 동일한 방식으로 실행될 수 있다.
- JVM은 가비지 컬렉션(Garbage Collection)을 통해 더 이상 필요하지 않은 객체를 자동으로 정리한다.
- 자바는 객체 지향 프로그래밍 언어로, 클래스와 객체를 기반으로 프로그램을 구성한다.
- 자바는 강력한 라이브러리와 프레임워크 생태계를 가지고 있어 다양한 애플리케이션을 개발할 수 있다.

### **컴파일**

컴파일(Compile)은 프로그래밍 언어로 작성된 소스 코드를 기계어로 변환하는 과정을 의미한다. 자바에서의 컴파일은 자바 소스 코드를 컴파일러를 통해 바이트 코드로 변환하는 과정이다.

### **인터프리터**

자바 컴파일러에 의해 생성된 바이트 코드는 JVM에 의해 해석 및 실행되는 과정을 거친다. 이때, JVM은 내부에 있는 인터프리터를 사용하여 바이트 코드를 한 줄씩 해석하고 실행한다. 인터프리터는 코드를 한 줄씩 실행하기 때문에 실행 시간이 느릴 수 있다.

![image](https://github.com/hyeong-jun-kim/CS-Study/assets/76768480/5687e62c-a195-43f8-8df5-a89aa733a53b)

### **JIT 컴파일러**

**JVM은 프로그램의 실행 중에 바이트 코드를 런타임에 기계어로 컴파일하는 JIT(Just-In-Time) 컴파일러를 사용할 수 있다.** JIT 컴파일러는 반복적으로 실행되는 코드를 실시간으로 분석하여 기계어로 변환하고, 이후에는 해당 부분을 직접 실행한다. 이를 통해 코드의 실행 속도를 향상시킬 수 있다.

![image](https://github.com/hyeong-jun-kim/CS-Study/assets/76768480/f4b950ae-906f-4061-8ae8-bc89b504e8de)

### **컴파일 임계치**

JIT 컴파일러는 실행 중인 프로그램의 코드를 컴파일하기 때문에 컴파일 시간이 소요된다. 이에 따라 JVM은 일정한 횟수의 반복 실행 이후에 해당 코드를 컴파일한다. 이를 **컴파일 임계치**라고 하며, 일정 횟수 이상 반복 실행된 코드는 기계어로 컴파일하여 성능을 향상시킨다.

컴파일 임계치는 다음 두가지에 의해 결정된다. 두 합계를 확인하여 메서드가 컴파일 될 자격을 얻으면 컴파일을 위한 큐에 대기하고, 컴파일 스레드에 의해 컴파일 된다.

- method entry counter(JVM 내에 있는 메서드 호출 횟수)
- back edge loop counter(메서드가 루프를 빠져나오기까지 돈 횟수)
    
    컴파일 임계치는 옵션에 따라 클라이언트(-client, C1), 서버(-server, C2)로 구분된다. 클라이언트 컴파일러에서 기본 값은 1,500, 서버 컴파일러의 기본 값은 10,000이다.
    

### **Code Cache**

JIT 컴파일러에 의해 생성된 기계어 코드는 Code Cache라는 메모리 영역에 저장된다. Code Cache는 JVM이 메모리 내에 유지하는 영역으로, 반복적으로 실행되는 코드의 컴파일 결과를 캐싱하여 재사용함으로써 성능을 향상시킨다. Code Cache의 크기는 제한되어 있으며, 필요에 따라 크기를 조정할 수 있다.

# 참고
[컴파일러와 인터프리터, 그리고 JIT 컴파일](https://velog.io/@bcj0114/컴파일러와-인터프리터-그리고-JIT-컴파일)

[JIT(Just In Time Compiler)](https://velog.io/@wnajsldkf/JITJust-In-Time-Compiler)

